{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Products - PCBulacan</title>
    <link rel="stylesheet" href="{% static 'css/admin.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="admin-layout">
        {% include 'includes/admin_sidebar.html' %}
        <div class="admin-content">
            {% include 'includes/admin_header.html' with page_title="Manage Products" %}
            <div class="dashboard-wrapper">
                <div class="dashboard-header-section">
                    <h1 class="dashboard-title">Manage Products</h1>
                    <button class="btn btn-primary" onclick="window.open('{% url 'admin:products_product_add' %}', '_blank')">
                        <i class="fas fa-plus"></i> Add New Product
                    </button>
                </div>
                <div class="dashboard-card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Image</th>
                                        <th>Name</th>
                                        <th>Category</th>
                                        <th>Price</th>
                                        <th>Stock</th>
                                        <th>Status</th>
                                        <th style="width: 120px;">Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for product in products %}
                                    <tr>
                                        <td>
                                            {% if product.image %}
                                            <img src="{{ product.image.url }}" alt="{{ product.name }}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 0.5rem;">
                                            {% else %}
                                            <div style="width: 60px; height: 60px; background: #f1f5f9; border-radius: 0.5rem; display: flex; align-items: center; justify-content: center;">
                                                <i class="fas fa-image" style="color: #94a3b8;"></i>
                                            </div>
                                            {% endif %}
                                        </td>
                                        <td style="font-weight: 500;">{{ product.name }}</td>
                                        <td>{{ product.category.name }}</td>
                                        <td>â‚±{{ product.price|floatformat:2 }}</td>
                                        <td>
                                            <span class="status-badge {% if product.stock == 0 %}cancelled{% elif product.stock <= 10 %}pending{% else %}delivered{% endif %}">
                                                {{ product.stock }}
                                            </span>
                                        </td>
                                        <td>
                                            {% if product.stock == 0 %}
                                            <span class="status-badge cancelled">Out of Stock</span>
                                            {% elif product.stock <= 10 %}
                                            <span class="status-badge pending">Low Stock</span>
                                            {% else %}
                                            <span class="status-badge delivered">In Stock</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <div style="display: flex; gap: 0.5rem;">
                                                <a href="{% url 'products:product_detail' product.id %}" class="btn-icon" title="View" target="_blank">
                                                    <i class="fas fa-eye"></i>
                                                </a>
                                                <a href="{% url 'admin:products_product_change' product.id %}" class="btn-icon" title="Edit" target="_blank">
                                                    <i class="fas fa-edit"></i>
                                                </a>
                                            </div>
                                        </td>
                                    </tr>
                                    {% empty %}
                                    <tr>
                                        <td colspan="7" style="text-align: center; padding: 3rem; color: #64748b;">
                                            <i class="fas fa-box-open" style="font-size: 3rem; margin-bottom: 1rem; display: block;"></i>
                                            No products found. Click "Add New Product" to get started.
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
